<p align="center">
  <a href="https://ibb.co/Sv4F0Yq">
    <picture>
      <img src="https://i.ibb.co/nkNxfdh/html.png" height="110">
    </picture>
    <h1 align="center">MVC Гео-валидатор</h1>
  </a>
</p>

<p align="center">
  <a aria-label="Размер репозитория" href="https://github.com/worthant/MVC-GeoValidator">
    <img alt="" src="https://github.com/worthant/MVC-GeoValidator?style=for-the-badge&logo=github">
  </a>
  <a aria-label="Английская версия" href="./README.md">
    <img alt="" src="https://img.shields.io/badge/translation-EN-red?style=for-the-badge">
  </a>
  <a aria-label="Сборка" href="https://github.com/worthant/MVC-GeoValidator/actions">
    <img alt="" src="https://github.com/worthant/MVC-GeoValidator/php.yaml?branch=main&style=for-the-badge&logo=github-actions">
  </a>
  <a aria-label="Лицензия" href="./LICENSE">
    <img alt="" src="https://github.com/worthant/MVC-GeoValidator?style=for-the-badge">
  </a>
</p>

<details open>
   <summary><b>Оглавление</b></summary>

- [Введение](#введение)
- [Требования для выполнения варианта `11117312`](#требования)
- [Темы для подготовки к защите лабораторной работы](#защита)
- [Как запустить чтобы всё работало?](#запуск)
- [Руководство по эксплуатации](#руководство-по-эксплуатации)
- [Теоретические материалы](#теоретические-материалы)

</details>

## Введение

> Добро пожаловать в этот лабораторный проектик - веб-приложение на базе сервлётов и JSP, реализованное в соответствии с `шаблоном MVC`. Назначение сайта - определить попадание точки на координатной области в заданную область :sunglasses:
>
> - Пользователи могут легко вводить данные через **HTML-страницу с веб-формой**, формируемую `JSP-страницей`.
> - Затем используется `servlets.AreaCheckServlet` для проверки попадания точки в область.
> - С `JavaScript` я обеспечиваю целостность данных, проводя `валидацию` ввода пользователя.
>
> Погрузитесь в изучение, чтобы исследовать, как эти технологии совмещаются для создания функционального, удобного для пользователя веб-приложения :computer:

<a id="требования"></a>

## Требования для выполнения варианта `11117312`

|![график](https://github.com/worthant/MVC-GeoValidator/assets/43885024/625ac219-2029-432d-8080-f23ddcb4ead4)|
|:-:|

### Разработать веб-приложение на базе *сервлетов* и *JSP*, определяющее попадание точки на координатной плоскости в заданную область

#### 1. Приложение должно быть реализовано в соответствии с `шаблоном MVC` и состоять из следующих элементов:

- [x] `servlets.ControllerServlet`, определяющий тип запроса, и, в зависимости от того, содержит ли запрос информацию о координатах точки и радиусе, делегирующий его обработку одному из перечисленных ниже компонентов. Все запросы внутри приложения должны передаваться этому сервлету (по методу `POST` или `GET`, у меня во варианте `POST`), остальные сервлеты с веб-страниц напрямую вызываться не должны.
- [x] `servlets.AreaCheckServlet`, осуществляющий проверку попадания точки в область на координатной плоскости и формирующий HTML-страницу с результатами для проверки. Должен обрабатывать все запросы, содержащие сведения о координатах точки и радиусе области.
- [x] `Страница JSP`, формирующая HTML-страницу с веб-формой. Должна обрабатывать все запросы, не содержащие сведений о координатах точки и радиусе области.

#### 2. Разработанная страница JSP должна содержать:

1. [x] "Шапку", содержащую ФИО студента, номер группы и номер варианта.
2. [x] Форму, отправляющую данные на сервер.
3. [x] Набор полей для задания координат точки и радиуса области в соответствии с вариантом задания.
4. [x] Сценарий на языке JavaScript, осуществляющий валидацию значений, вводимых пользователем в поля формы.
5. [ ] Интерактивный элемент, содержащий изображение области на координатной плоскости (в соответствии с вариантом задания) и реализующий следующую функциональность: 
   - [ ] Если радиус области установлен, клик курсором мыши по изображению должен обрабатываться JavaScript-функцией, определяющей координаты точки, по которой кликнул пользователь и отправляющей полученные координаты на сервер для проверки факта попадания.
   - [ ] В противном случае, после клика по картинке должно выводиться сообщение о невозможности определения координат точки.
   - [ ] После проверки факта попадания точки в область изображение должно быть обновлено с учётом результатов этой проверки (т.е., на нём должна появиться новая точка).
   - [ ] Аккуратно проводить ресайз графика в зависимости от r, точка должна появляться прямо под курсором, за исключением округления координаты `x` в виду того, что она должна быть integer
6. [x] Таблицу с результатами предыдущих проверок. Список результатов должен браться из контекста приложения, HTTP-сессии или `Bean-компонента`**(у меня во варианте)** в зависимости от варианта.

#### 3. Страница, возвращаемая servlets.AreaCheckServlet, должна содержать:

1. [x] Таблицу, содержащую полученные параметры.
2. [x] Результат вычислений - факт попадания или непопадания точки в область.
3. [x] Ссылку на страницу с веб-формой для формирования нового запроса.

#### Разработанное веб-приложение должно быть развёрнуто на сервере `WildFly`. Сервер должен быть запущен в standalone-конфигурации, порты должны быть настроены в соответствии с выданным portbase, доступ к http listener'у должен быть открыт для всех IP.

<a id="защита"></a>

## Темы для подготовки к защите лабораторной работы

1. [ ] Java-сервлеты. Особенности реализации, ключевые методы, преимущества и недостатки относительно CGI и FastCGI.
2. [ ] Контейнеры сервлетов. Жизненный цикл сервлета.
3. [ ] Диспетчеризация запросов в сервлетах. Фильтры сервлетов.
4. [ ] HTTP-сессии - назначение, взаимодействие сервлетов с сессией, способы передачи идентификатора сессии.
5. [ ] Контекст сервлета - назначение, способы взаимодействия сервлетов с контекстом.
6. [ ] JavaServer Pages. Особенности, преимущества и недостатки по сравнению с сервлетами, область применения.
7. [ ] Жизненный цикл JSP.
8. [ ] Структура JSP-страницы. Комментарии, директивы, объявления, скриптлеты и выражения.
9. [ ] Правила записи Java-кода внутри JSP. Стандартные переменные, доступные в скриптлетах и выражениях.
10. [ ] Bean-компоненты и их использование в JSP.
11. [ ] Стандартные теги JSP. Использование Expression Language (EL) в JSP.
12. [ ] Параметры конфигурации JSP в дескрипторе развёртывания веб-приложения.
13. [ ] Шаблоны проектирования и архитектурные шаблоны. Использование в веб-приложениях.
14. [ ] Архитектура веб-приложений. Шаблон MVC. Архитектурные модели Model 1 и Model 2 и их реализация на платформе Java EE.

<a id="запуск"><a>
## Как задеплоить на гелиос чтобы лаба работала? (на моём примере)

1. Скачиваете Wildfly 21 версии (LGPL) отсюда: https://www.wildfly.org/downloads/#21.0.0.Final
2. Распаковываем и заливаем архив на гелиос (Да-да, все 200 мегабайт)
3. в `~/wildfly/wildfly-21.0.0.Final/standalone/configuration/standalone.xml` меняем:
```bash
<interface name="public">
  <inet-address value="${jboss.bind.address:127.0.0.1}" />
</interface>
```
на
```bash
<interface name="public">
  <any-address />
</interface>
```

---
Дальше задача 
- Поменять дефолтный порт на ваш `portbase`
- ВАЖНО! Поменять все остальные порты так, чтобы при запуске сервера не вылетало никаких ошибок (`already in use`, e.t.c.)
> как только я поменял все порты - у меня увиделись все сервлёты и сервер заработал, до этого довольствовался 404

```
<socket-binding name="http" port="${jboss.http.port:8080}" />
<socket-binding name="https" port="${jboss.https.port:443}"/>
...
...
```
на
```
<socket-binding name="http" port="${jboss.http.port:<portbase>}"/>
```
! где **portbase** - число из гугл-журнала, также можно добавить к нему число от 1 до 99, т.к. portbase выдают с расчётом, что 99 портов, идущие после него, тоже ваши.


К примеру, мой portbase - `32318`. Он выдаётся с с расчётом, что 99 портов, идущие после него, тоже мои, поэтому я написал любые порты больше 32318 на 1-99 и получился мой `standalone.xml`:
```
<socket-binding name="ajp" port="${jboss.ajp.port:32319}"/>
<socket-binding name="http" port="${jboss.http.port:32318}"/>
<socket-binding name="https" port="${jboss.https.port:32320}"/>
<socket-binding name="management-http" interface="management" port="${jboss.management.http.port:32321}"/>
<socket-binding name="management-https" interface="management" port="${jboss.management.https.port:32322}"/> 
```

4. Подключаемся к helios, пробросив порты с помощью команды:
```
ssh -p 2222 s******@se.ifmo.ru -L <portbase>:helios.cs.ifmo.ru:<portbase>
```   
аргумент ssh команды -L означает, что порт на локальном хосте должен быть перенаправлен на указанный хост и
порт на удаленной стороне.

4. Запускаем сервер:

```bash
bash ~/wildfly/wildfly-21.0.0.Final/bin/standalone.sh
```

5. Переходим в браузере по url: http://localhost:8080/war_name.


## Руководство по эксплуатации

- Разворачиваете на гелиосе, прокидываете порты к себе. 

Можете зайти ко мне в s368090, запустить standalone.sh:

```bash
bash ~/wildfly/wildfly-21.0.0.Final/bin/standalone.sh
```

И прокинуть порты следующим образом:

```bash
ssh -L 32318:localhost:32318 s368090@se.ifmo.ru -p 2222
```

- Теперь можете тыкать на график, будут появляться точки зелёные и красные в зависимости от попадания.
- Что на сервере, что на клиенте - выполняется полная валидация данных, поэтому не бойтесь ввести что-то не то, с помощью `алертов Toastify` вы увидите посказки в случае чего.
- Лабораторная работа следует AJAX, на каждый запрос сервер добавляет строчку таблицы в Bean, откуда таблица заполняется данными с помощью table.jsp.

## Теоретические материалы

1. **Web docs 1** : <https://www.w3schools.com/css/css3_borders.asp>

2. **Web docs 2** : <https://developer.mozilla.org/en-US/docs/Web/HTML/Element/th>

3. **Достойный гайд на вопросы с se.ifmo** : [guide](https://docs.google.com/document/d/1ERKz7M5CnF_sDTW6Fkhw4zmlbiLbEUtRtWUz8PIujSQ/edit)

4. (`Рекомендуется для курса веб-программирования`) - [Введение в enterprize](https://javarush.com/groups/posts/2514-vvedenie-v-enterprise-razrabotku) 
> - Сеть, клиент-сервер, HTTP/HTTPS, Maven, Сервлёты, Контейнеры сервлётов, MVC
